# Implementation Plan

- [ ] 1. Set up project dependencies and Prisma client
  - [ ] 1.1 Install lucide-react for icons
    - Run `bun add lucide-react`
    - _Requirements: 1.2, 5.3_
  - [ ] 1.2 Generate Prisma client
    - Run `bunx prisma generate`
    - _Requirements: 2.2, 3.2, 4.2_

- [ ] 2. Create admin dashboard layout and home page
  - [ ] 2.1 Create admin layout with navigation
    - Create `app/admin/layout.tsx` with sidebar navigation
    - Include header with title and theme toggle
    - _Requirements: 1.1, 5.1, 5.2_
  - [ ] 2.2 Create dashboard home page with menu cards
    - Create `app/admin/page.tsx` with three navigation cards
    - Implement DashboardCard component with icon, title, description
    - Add responsive grid layout (1/2/3 columns)
    - Add hover effects for interactivity feedback
    - _Requirements: 1.1, 1.2, 1.3, 1.4_
  - [ ] 2.3 Write property test for menu item rendering
    - **Property 1: Menu item rendering completeness**
    - **Validates: Requirements 1.2**

- [x] 3. Implement Gift Code Management
  - [x] 3.1 Create Gift Code API routes
    - Create `app/api/admin/gift-codes/route.ts` with GET, POST methods
    - Create `app/api/admin/gift-codes/[id]/route.ts` with GET, PUT, DELETE methods
    - Implement validation and error handling
    - _Requirements: 2.3, 2.4_
  - [x] 3.2 Create Gift Code list page
    - Create `app/admin/gift-codes/page.tsx`
    - Display table with code, type, rewards, status, expiry, actions
    - Add pagination and search functionality
    - _Requirements: 2.1, 2.2_
  - [x] 3.3 Create Gift Code form component
    - Create `app/components/admin/GiftCodeForm.tsx`
    - Include code input with generate button
    - Add reward inputs (gold, gem, ruby)
    - Add type selector and status toggle
    - Add expiry date picker
    - _Requirements: 2.3, 2.4_
  - [x] 3.4 Create Gift Code create/edit pages
    - Create `app/admin/gift-codes/new/page.tsx`
    - Create `app/admin/gift-codes/[id]/edit/page.tsx`
    - Wire up form submission to API
    - _Requirements: 2.3, 2.4_
  - [x] 3.5 Write property test for gift code validation
    - **Property 5: Form validation and persistence**
    - **Validates: Requirements 2.3**

- [ ] 4. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 5. Implement Shop Management
  - [ ] 5.1 Create Shop API routes
    - Create `app/api/admin/shop/route.ts` with GET, POST methods
    - Create `app/api/admin/shop/[id]/route.ts` with GET, PUT, DELETE methods
    - Implement validation and error handling
    - _Requirements: 3.3, 3.4_
  - [ ] 5.2 Create Shop items list page
    - Create `app/admin/shop/page.tsx`
    - Display table with item name, tab, price, status, actions
    - Add filtering by tab and availability
    - _Requirements: 3.1, 3.2_
  - [ ] 5.3 Create Shop item form component
    - Create `app/components/admin/ShopItemForm.tsx`
    - Include item template selector
    - Add price inputs (gold, gem)
    - Add availability toggles
    - _Requirements: 3.3, 3.4_
  - [ ] 5.4 Create Shop item create/edit pages
    - Create `app/admin/shop/new/page.tsx`
    - Create `app/admin/shop/[id]/edit/page.tsx`
    - Wire up form submission to API
    - _Requirements: 3.3, 3.4_
  - [ ] 5.5 Write property test for shop item validation
    - **Property 5: Form validation and persistence**
    - **Validates: Requirements 3.3**

- [ ] 6. Implement Milestone Management
  - [ ] 6.1 Create Milestone API routes
    - Create `app/api/admin/milestones/route.ts` with GET, POST methods
    - Create `app/api/admin/milestones/[id]/route.ts` with GET, PUT, DELETE methods
    - Implement unique threshold validation
    - _Requirements: 4.3, 4.4_
  - [ ] 6.2 Create Milestones list page
    - Create `app/admin/milestones/page.tsx`
    - Display table with threshold, description, rewards, actions
    - Sort by threshold ascending
    - _Requirements: 4.1, 4.2_
  - [ ] 6.3 Create Milestone form component
    - Create `app/components/admin/MilestoneForm.tsx`
    - Include threshold input
    - Add description textarea
    - Add rewards builder
    - _Requirements: 4.3, 4.4_
  - [ ] 6.4 Create Milestone create/edit pages
    - Create `app/admin/milestones/new/page.tsx`
    - Create `app/admin/milestones/[id]/edit/page.tsx`
    - Wire up form submission to API
    - _Requirements: 4.3, 4.4_
  - [ ] 6.5 Write property test for unique threshold validation
    - **Property 10: Unique threshold validation**
    - **Validates: Requirements 4.3**

- [ ] 7. Add loading states and UI polish
  - [ ] 7.1 Create LoadingSpinner component
    - Create `app/components/admin/LoadingSpinner.tsx`
    - Add loading states to all pages
    - _Requirements: 6.3_
  - [ ] 7.2 Add toast notifications
    - Implement success/error toast messages
    - _Requirements: 5.1_
  - [ ] 7.3 Write property test for loading indicator
    - **Property 9: Loading indicator display**
    - **Validates: Requirements 6.3**

- [ ] 8. Final Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.
